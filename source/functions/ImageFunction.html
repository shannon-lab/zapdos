<!DOCTYPE html><head><meta charset="UTF-8"><title>ImageFunction | Zapdos</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/zapdos.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Zapdos</a><a href="https://github.com/shannon-lab/zapdos" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="b7d962ab-3b79-4808-ba43-4edd8d6c76b4" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="ab9c2a8c-2724-431e-949a-7fd097bdef20" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="abdf5d54-279c-42db-bfa1-4865b6400669" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#" class="sidenav-trigger" data-target="47c7c979-b481-4b29-84c2-ff26b703b3bb"><i class="material-icons">menu</i></a><ul class="sidenav" id="47c7c979-b481-4b29-84c2-ff26b703b3bb"><li><a href="#!" class="dropdown-trigger" data-target="fbf253d2-8dfa-4f09-8a0f-9d5cdf31aa8b" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="bd226781-2c7b-48ba-b984-e591fc15bed4" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="da6be421-5380-4354-8a96-46aa32377ed9" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="b7d962ab-3b79-4808-ba43-4edd8d6c76b4"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li></ul><ul class="dropdown-content" id="ab9c2a8c-2724-431e-949a-7fd097bdef20"><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="abdf5d54-279c-42db-bfa1-4865b6400669"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="../../development/zapdos_developer_info.html">Zapdos Developer Information</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul><ul class="dropdown-content" id="fbf253d2-8dfa-4f09-8a0f-9d5cdf31aa8b"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li></ul><ul class="dropdown-content" id="bd226781-2c7b-48ba-b984-e591fc15bed4"><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="da6be421-5380-4354-8a96-46aa32377ed9"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="../../development/zapdos_developer_info.html">Zapdos Developer Information</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">functions</span><a href="#" class="breadcrumb">ImageFunction</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="a182cc73-6e90-432a-9f35-fa4f953ff57b" data-section-level="1" data-section-text="ImageFunction"><h1 id="imagefunction">ImageFunction</h1><p>Function with values sampled from an image or image stack.</p><section class="scrollspy" id="24d28671-4d0c-4b7a-a74a-bd35ab0481ee" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>Simulations often require the phase to be initialized or compared to existing micro-structure data, such as CT or SEM scans as shown in the figure. MOOSE includes a flexible, <a href="../../syntax/Functions/index.html">Function</a> based method for accessing this type of data for use in initial conditions or other calculations. For example, <a href="#fig:large_adapt">Figure 1</a> is a reconstructed image of snow captured using cryospheric micro-CT scanner at the <a href="http://www.montana.edu/subzero">MSU Subzero Research Laboratory</a>.</p><div class="card moose-float" id="fig:large_adapt"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../large_media/framework/image_function/large_adapt.png"></img></picture><p class="moose-caption"><span class="moose-caption-heading">Figure 1: </span><span class="moose-caption-text" id="fig:large_adapt">Mesh of 3D micro-CT data using <code>ImageFunction</code>.</span></p></div></div></section><section class="scrollspy" id="3c71d025-c93a-422f-adfa-7b42d2d4cfe1" data-section-level="2" data-section-text="Setup"><h2 id="setup">Setup</h2><p>To utilize the image reading portion of the phase-field module VTK must be enabled when building libMesh. Please see MOOSE FAQ for more information.</p></section><section class="scrollspy" id="5529b25d-87ff-4b8c-b5ae-a2669a6b7d30" data-section-level="2" data-section-text="Examples"><h2 id="examples">Examples</h2><section id="44c64f53-6a85-4ed7-9e94-157fafa1b669" data-section-level="3" data-section-text="Single Image"><h3 id="single-image">Single Image</h3><p>Consider the simple image in <a href="#fig:small_raw">Figure 2</a>, reading this image is accomplished by including a <code>ImageFunction</code> in your input file.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#c451116c-6cc9-44f0-a8ac-a268f4ae4546">(moose/test/tests/functions/image_function/image.i)</a><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_raw"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../large_media/framework/image_function/small_raw.png"></img></picture><p class="moose-caption"><span class="moose-caption-heading">Figure 2: </span><span class="moose-caption-text" id="fig:small_raw">Example image input (stack/test_00.png).</span></p></div></div><p>This function may then be used just like any other function within MOOSE, for example, it may be utilized as an initial condition for a variable.  The following input file syntax would use the function above as an initial condition for the <code>u</code> variable and create an initial mesh as shown in <a href="#fig:small_uniform">Figure 3</a>.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#77680fc6-ce03-4548-8881-3c7f77d7e15d">(moose/test/tests/functions/image_function/image.i)</a><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_uniform"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../large_media/framework/image_function/small_uniform.png"></img></picture><p class="moose-caption"><span class="moose-caption-heading">Figure 3: </span><span class="moose-caption-text" id="fig:small_uniform">Mesh showing initial condition extracted from image in <a href="#fig:small_raw">Figure 2</a>.</span></p></div></div><p>The example image shown is 20 by 20 pixels as is the mesh (20 by 20 elements) to which the initial condition is applied. The meshed version looks slightly different than the original image because the initial condition is applied by sampling the image at each node within the mesh, which in this case matches with the pixel boundaries, so the value can sampled can easily vary due to floating point precision limitations.</p><p>Matching the mesh to the pixel dimensions <strong>is not</strong> a requirement, and not recommend. The main reason for building the <code>ImageFunction</code> object was to enable an arbitrary mesh geometry to be able to sample the image and adapt accordingly.</p><p>Beginning with a 2 by 2 element mesh and adding the following an adaptivity block to the input file results in the mesh shown <a href="#fig:small_adapt">Figure 4</a>.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#5bf709d3-78a8-4e68-b9ed-846a7f227caa">(moose/test/tests/functions/image_function/threshold_adapt.i)</a><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_adapt"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../large_media/framework/image_function/small_adapt.png"></img></picture><p class="moose-caption"><span class="moose-caption-heading">Figure 4: </span><span class="moose-caption-text" id="fig:small_adapt">Mesh showing initial condition with initial adaptivity extracted from image in                <a href="#fig:small_raw">Figure 2</a>.</span></p></div></div></section><section id="19d13058-0c77-4b4a-8e32-d8d381f3a614" data-section-level="3" data-section-text="Image Stacks"><h3 id="image-stacks">Image Stacks</h3><p>Image stacks or 3D images are also supported (see <a href="ImageFunction.html#file-types">Supported File Types</a>). For example, consider as set of images named test_00.png, test_01.png, ..., and test_19.png within a directory &quot;stacked&quot;. To read these images the syntax below is used in the <code>ImageFunction</code> block.  Again, using this data as an initial condition and using initial adaptivity, as shown above, results in the mesh shown in <a href="#fig:small_3d">Figure 5</a>.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#2d6f762c-4015-4083-8e89-abc53045b2d4">(moose/test/tests/functions/image_function/image_3d.i)</a><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_3d"><div class="card-content"><picture class="materialboxed moose-image"><img src="../../large_media/framework/image_function/small_3d.png"></img></picture><p class="moose-caption"><span class="moose-caption-heading">Figure 5: </span><span class="moose-caption-text" id="fig:small_3d">3D Mesh showing initial condition with initial adaptivity extracted from a stack of                images similar to the image in <a href="#fig:small_raw">Figure 2</a>. The mesh is cropped in the vertical                direction to show the internal structure.</span></p></div></div><p>It is also possible to limit the reader to a set of images using the <a href="#ecc7c6a6-ed2e-4cfc-bd37-8ffd551df34a" class="moose-modal-link modal-trigger">&quot;file_range&quot;</a> parameter, which may be set to a single value to read a single image or a range to read a subset of the images.</p></section></section><section class="scrollspy" id="ccb13725-0967-4f2a-a1fe-2ae49288a25b" data-section-level="2" data-section-text="Image Processing"><h2 id="image-processing">Image Processing</h2><p>The <a href="http://www.vtk.org/">VTK</a> library includes a range of image filters and processing tools, some basic processing tools are included. However, a derivative class could easily be developed to expand upon these capabilities.</p><section id="c9117416-32b2-4d18-82c5-251f2314aabf" data-section-level="3" data-section-text="Component"><h3 id="component">Component</h3><p>By default, the RGB pixel data is converted into a single greyscale value representing the magnitude. This is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageMagnitude.html">vtkImageMagnitude</a> class.</p><p>It is possible to select a single component rather than using the magnitude by setting the <a href="#38b9712d-4dbc-4e04-9556-5323e26a88a5" class="moose-modal-link modal-trigger">&quot;component&quot;</a> parameter in the input file to a valid component number, which will be 0, 1 or 2 for RGB images.</p></section><section id="a8f9b6fb-a772-4abd-91ee-127c7cf25570" data-section-level="3" data-section-text="Thresholding"><h3 id="thresholding">Thresholding</h3><p>Basic thresholding is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageThreshold.html">vtkImageThreshold</a> class. Thresholding requires three parameters be set in the input file:</p><ul class="browser-default"><li><p><a href="#54db9c55-abcf-4426-8945-5d42429fa1d2" class="moose-modal-link modal-trigger">&quot;threshold&quot;</a>: The threshold value to consider. </p></li><li><p><a href="#87b830f9-414b-4ff8-83ce-2494c3ba9f82" class="moose-modal-link modal-trigger">&quot;upper_value&quot;</a>: Image data above the threshold are replaced with this value. </p></li><li><p><a href="#a6a4654f-5c36-4cc7-a699-659ff690bf2a" class="moose-modal-link modal-trigger">&quot;lower_value&quot;</a>: Image data below the threshold are replaced with this value.</p></li></ul></section><section id="ef1d6b54-067c-4e9a-9be5-5197b1dde3b8" data-section-level="3" data-section-text="Shift and Scale"><h3 id="shift-and-scale">Shift and Scale</h3><p>It is possible to shift and scale the image data, this is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageShiftScale.html">vtkImageShiftScale</a> object. The <a href="#cd2ff28e-dfaa-4a72-b4da-ad7bbf68310a" class="moose-modal-link modal-trigger">&quot;shift&quot;</a> parameter adds the given value to the image data and <a href="#c7b74575-a7b5-4693-9f0d-0219b36b7c49" class="moose-modal-link modal-trigger">&quot;scale&quot;</a> parameter multiplies the image data by the supplied value.</p><p>The order of application of the shift and scale are dictated by the VTK object, the documentation states: &quot;Pixels are shifted (a constant value added) and then scaled (multiplied by a scalar).&quot;</p></section><section id="4dcb9da9-b19e-4b98-a390-1377d4d0fe04" data-section-level="3" data-section-text="Image Flipping"><h3 id="image-flipping">Image Flipping</h3><p>Flipping an image along the major axis directions x, y, or z is performed using <a href="http://www.vtk.org/doc/nightly/html/classvtkImageFlip.html">vtkImageFlip</a> object. Three flags exists&mdash;<a href="#2068c461-7d8c-40c6-8046-c83769070bd2" class="moose-modal-link modal-trigger">&quot;flip_x&quot;</a>, <a href="#e03fe333-8fd7-483f-bb1c-e4509e489df8" class="moose-modal-link modal-trigger">&quot;flip_y&quot;</a>, and <a href="#f3c2e87a-0280-444c-813e-f7a6d86908c2" class="moose-modal-link modal-trigger">&quot;flip_z&quot;</a>&mdash;which may be set in any combination.</p></section></section><section class="scrollspy" id="284dca4f-d614-4ea8-9d44-765f5bfc4057" data-section-level="2" data-section-text="Image Dimensions"><h2 id="image-dimensions">Image Dimensions</h2><p>By default, the image actual physical dimensions are set to the dimensions of the mesh. However, it is possible to set the dimensions of the image independently from using the <code>origin</code> and <code>dimensions</code> input parameters.</p><p>This allows for flexibility to how the <code>ImageFunction</code> is utilized. For example, a mesh could be defined to domain that is smaller than the actual image. Thus, if the <code>ImageFunction</code> dimensions are set to the larger domain, the mesh would only sample some portion of the image. Effectively, this feature can work on a cropped image, without needing to create a separate cropped image.</p></section><section class="scrollspy" id="d3571c64-57d0-469d-98c4-733fca9bba02" data-section-level="2" data-section-text="Supported File Types"><h2 id="file-types">Supported File Types</h2><p>Currently, two types of files are supported *.tif and *.png. However, *.tif files often do not read correctly with VTK, depending on the format of the file. So, if you experience problems reading *.tif files it may require changing the format to *.png. This can easily be done with any number of tools with <a href="http://www.imagemagick.org">ImageMagick</a> being one of the most powerful.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#f64f17f8-497e-4706-b777-64636241b0d6">(moose/test/tests/functions/image_function/image_3d.i)</a></section><section class="scrollspy" id="2586449f-e657-41c1-971f-6f656abaeefa" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="86666af0-c57a-4437-b9bf-56c49cc9600c" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">component</span><span class="moose-parameter-header-description">The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">dimensions</span><span class="moose-parameter-header-description">x,y,z dimensions of the image (defaults to mesh dimensions)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::Point</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>x,y,z dimensions of the image (defaults to mesh dimensions)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">LINEAR</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, ALWAYS.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>LINEAR</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, ALWAYS</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, ALWAYS.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file</span><span class="moose-parameter-header-description">Name of single image file to extract mesh parameters from.  If provided, a 2D mesh is created.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileName</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Name of single image file to extract mesh parameters from.  If provided, a 2D mesh is created.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_base</span><span class="moose-parameter-header-description">Image file base to open, use this option when a stack of images must be read (ignored if 'file' is given)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileNameNoExtension</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Image file base to open, use this option when a stack of images must be read (ignored if 'file' is given)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_range</span><span class="moose-parameter-header-description">Range of images to analyze, used with 'file_base' (ignored if 'file' is given)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;unsigned int&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Range of images to analyze, used with 'file_base' (ignored if 'file' is given)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_suffix</span><span class="moose-parameter-header-description">Suffix of the file to open, e.g. 'png'</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Suffix of the file to open, e.g. 'png'</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">origin</span><span class="moose-parameter-header-description">Origin of the image (defaults to mesh origin)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::Point</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Origin of the image (defaults to mesh origin)</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="775f3271-485e-4575-883c-6995d107d02c" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="8a5dcd11-8682-461e-93c4-5e6e02684b0c" data-section-level="3" data-section-text="Flip Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">flip_x</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the x-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the x-axis</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">flip_y</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the y-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the y-axis</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">flip_z</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the z-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the z-axis</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Flip Parameters</h3></summary></details></section><section id="7cfa1c75-92be-4639-8a92-dae99c7ec206" data-section-level="3" data-section-text="Threshold Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">lower_value</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The value to set for data less than the threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The value to set for data less than the threshold value</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">threshold</span><span class="moose-parameter-header-description">The threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The threshold value</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">upper_value</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The value to set for data greater than the threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The value to set for data greater than the threshold value</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Threshold Parameters</h3></summary></details></section><section id="2fc7d142-fa4b-4f0e-9641-f3a649baa3af" data-section-level="3" data-section-text="Rescale Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">scale</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Multiplier to apply to all pixel values; occurs after shifting</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Multiplier to apply to all pixel values; occurs after shifting</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">shift</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Value to add to all pixels; occurs prior to scaling</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Value to add to all pixels; occurs prior to scaling</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Rescale Parameters</h3></summary></details></section></section></section><div class="moose-modal modal" id="c451116c-6cc9-44f0-a8ac-a268f4ae4546"><div class="modal-content"><h4>(moose/test/tests/functions/image_function/image.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 10
  nz = 10
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="77680fc6-ce03-4548-8881-3c7f77d7e15d"><div class="modal-content"><h4>(moose/test/tests/functions/image_function/image.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 10
  nz = 10
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="5bf709d3-78a8-4e68-b9ed-846a7f227caa"><div class="modal-content"><h4>(moose/test/tests/functions/image_function/threshold_adapt.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 2.7e4
    upper_value = 1
    lower_value = -1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Outputs]
  exodus = true
[]

</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="2d6f762c-4015-4083-8e89-abc53045b2d4"><div class="modal-content"><h4>(moose/test/tests/functions/image_function/image_3d.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="ecc7c6a6-ed2e-4cfc-bd37-8ffd551df34a"><div class="modal-content"><h4>file_range</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;unsigned int&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Range of images to analyze, used with 'file_base' (ignored if 'file' is given)</p></div></div><div class="moose-modal modal" id="38b9712d-4dbc-4e04-9556-5323e26a88a5"><div class="modal-content"><h4>component</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image.</p></div></div><div class="moose-modal modal" id="54db9c55-abcf-4426-8945-5d42429fa1d2"><div class="modal-content"><h4>threshold</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The threshold value</p></div></div><div class="moose-modal modal" id="87b830f9-414b-4ff8-83ce-2494c3ba9f82"><div class="modal-content"><h4>upper_value</h4><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The value to set for data greater than the threshold value</p></div></div><div class="moose-modal modal" id="a6a4654f-5c36-4cc7-a699-659ff690bf2a"><div class="modal-content"><h4>lower_value</h4><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The value to set for data less than the threshold value</p></div></div><div class="moose-modal modal" id="cd2ff28e-dfaa-4a72-b4da-ad7bbf68310a"><div class="modal-content"><h4>shift</h4><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Value to add to all pixels; occurs prior to scaling</p></div></div><div class="moose-modal modal" id="c7b74575-a7b5-4693-9f0d-0219b36b7c49"><div class="modal-content"><h4>scale</h4><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Multiplier to apply to all pixel values; occurs after shifting</p></div></div><div class="moose-modal modal" id="2068c461-7d8c-40c6-8046-c83769070bd2"><div class="modal-content"><h4>flip_x</h4><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the x-axis</p></div></div><div class="moose-modal modal" id="e03fe333-8fd7-483f-bb1c-e4509e489df8"><div class="modal-content"><h4>flip_y</h4><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the y-axis</p></div></div><div class="moose-modal modal" id="f3c2e87a-0280-444c-813e-f7a6d86908c2"><div class="modal-content"><h4>flip_z</h4><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the z-axis</p></div></div><div class="moose-modal modal" id="f64f17f8-497e-4706-b777-64636241b0d6"><div class="modal-content"><h4>(moose/test/tests/functions/image_function/image_3d.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#24d28671-4d0c-4b7a-a74a-bd35ab0481ee" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#3c71d025-c93a-422f-adfa-7b42d2d4cfe1" class="tooltipped" data-position="left" data-tooltip="Setup">Setup</a></li><li><a href="#5529b25d-87ff-4b8c-b5ae-a2669a6b7d30" class="tooltipped" data-position="left" data-tooltip="Examples">Examples</a></li><li><a href="#ccb13725-0967-4f2a-a1fe-2ae49288a25b" class="tooltipped" data-position="left" data-tooltip="Image Processing">Image Processing</a></li><li><a href="#284dca4f-d614-4ea8-9d44-765f5bfc4057" class="tooltipped" data-position="left" data-tooltip="Image Dimensions">Image Dimensions</a></li><li><a href="#d3571c64-57d0-469d-98c4-733fca9bba02" class="tooltipped" data-position="left" data-tooltip="Supported File Types">Supported File Types</a></li><li><a href="#2586449f-e657-41c1-971f-6f656abaeefa" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>