<!DOCTYPE html><head><meta charset="UTF-8"><title>ReferenceResidualProblem | Zapdos</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/zapdos.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://shannon-lab.github.io/zapdos" class="left moose-logo hide-on-med-and-down">Zapdos</a><a href="https://github.com/shannon-lab/zapdos" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="5555f557-b7f1-438c-99b6-2716354d314f" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="72efd3d1-2bcb-40d7-9324-b368c4ff6e48" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="17ecd8db-9f99-4a96-a5a7-74aec1a25dab" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#" class="sidenav-trigger" data-target="7e61b40b-4ea4-4677-bd32-3ae6a3a58799"><i class="material-icons">menu</i></a><ul class="sidenav" id="7e61b40b-4ea4-4677-bd32-3ae6a3a58799"><li><a href="#!" class="dropdown-trigger" data-target="38c40637-8e1f-4cb0-bd73-47be262658ce" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="fbf275be-f04b-47c9-94b0-2fa34eff9741" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="077e789d-95fc-474d-91ef-01f71ceaf9cf" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="5555f557-b7f1-438c-99b6-2716354d314f"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li></ul><ul class="dropdown-content" id="72efd3d1-2bcb-40d7-9324-b368c4ff6e48"><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="17ecd8db-9f99-4a96-a5a7-74aec1a25dab"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul><ul class="dropdown-content" id="38c40637-8e1f-4cb0-bd73-47be262658ce"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li></ul><ul class="dropdown-content" id="fbf275be-f04b-47c9-94b0-2fa34eff9741"><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="077e789d-95fc-474d-91ef-01f71ceaf9cf"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://shannon-lab.github.io/zapdos" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">problems</span><a href="#" class="breadcrumb">ReferenceResidualProblem</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="07fbb326-1cf9-4832-9c22-f7b1314cc27d" data-section-level="1" data-section-text="ReferenceResidualProblem"><h1 id="referenceresidualproblem">ReferenceResidualProblem</h1><p>Problem that checks for convergence relative to a user-supplied reference quantity rather than the initial residual</p><section class="scrollspy" id="d8d246ee-ed8b-4f25-a7a7-db5d105395d4" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p>By default, MOOSE checks convergence using relative and absolute criteria. Once the residual drops below either an absolute tolerance, or the residual divided by the initial residual for the current time step drops below a relative tolerance, the solution is considered converged. This works well for many problems, but there are some scenarios that are problematic for convergence:</p><ol class="browser-default" start="1"><li><p>There is a large scaling difference between the solution variables, so taking the <span class="moose-katex-inline-equation" id="moose-equation-40595d7c-10db-4f18-b862-60ace5c6421b"><script>var element = document.getElementById("moose-equation-40595d7c-10db-4f18-b862-60ace5c6421b");katex.render("L^2", element, {displayMode:false,throwOnError:false});</script></span> norm of the combined vector skews the convergence check so that it becomes increasingly dominated by the variable with larger absolute values in the residual vector as the scaling difference increases.</p><p></p></li><li><p>The model conditions have changed very little from the previous step, so the initial residual is very low because the solution is essentially converged before any nonlinear iterations have been performed. The standard convergence check that uses the initial residual as a reference quantity eventually fails after a few steps because the solution is forced to converge to tighter limits with each time step, until numerical roundoff error prevents the solution from converging more tightly.</p><p></p></li><li><p>The state of the problem is such that the values of the residual at all degrees of freedom where Dirichlet boundary conditions are applied are zero in the converged solution. An example of this is a mechanics model that has Dirichlet boundary conditions to prevent rigid body motion, but the model only experiences free thermal expansion, so there are no reaction loads at those points. Another example is if there is a time step when no loading is applied.</p></li></ol><p><code>ReferenceResidualProblem</code> checks for convergence by comparing the residual to a different reference quantity (instead of the initial residual). The user specifies a reference vector that can be used in a relative convergence check. Because the solution variables can have significantly different scaling, the convergence check performed in <code>ReferenceResidualProblem</code> checks convergence of the solution variables individually. When the <span class="moose-katex-inline-equation" id="moose-equation-6cb3e08f-ba9b-495d-8f0d-3a8df82c18ac"><script>var element = document.getElementById("moose-equation-6cb3e08f-ba9b-495d-8f0d-3a8df82c18ac");katex.render("L^2", element, {displayMode:false,throwOnError:false});</script></span> norm of the residual for each solution variable is less than either the relative tolerance times the <span class="moose-katex-inline-equation" id="moose-equation-54995911-4c39-4709-bb09-dd4a06b5410e"><script>var element = document.getElementById("moose-equation-54995911-4c39-4709-bb09-dd4a06b5410e");katex.render("L^2", element, {displayMode:false,throwOnError:false});</script></span> norm of the corresponding reference variable or the absolute tolerance, the solution is considered converged.</p><p>By checking the convergence of individual variables and comparing to reference quantities that are meaningful even when the solution is not changing, <code>ReferenceResidualProblem</code> addresses the first two issues listed above. The third issue is potentially more of a problem with <code>ReferenceResidualProblem</code> than the standard MOOSE convergence check, and dealing with it is discussed in <a href="ReferenceResidualProblem.html#zero_resid">Dealing with Residuals that are Zero at Boundaries</a>.</p><p>Use of this procedure requires that the user provide physically meaningful reference quantities. The vector of the reaction loads (in the case of mechanics) or integrated fluxes (in the case of diffusion problems) is typically suitable for this purpose, as it provides a measure of the loading applied to the system. To make these reference quantities, simply add the <code>extra_vector_tags = &lt;reference_vector_name&gt;</code> param/value pair to the computing objects that you want to add into the reference vector. An explicit example is given in <a href="ReferenceResidualProblem.html#example">Example Input Syntax</a> below.</p><p>Since relative convergence is computed differently with this approach, the nonlinear relative tolerance required to achieve the same error is typically different than with the default approach in MOOSE, and the differences will vary by the problem. The code user must evaluate the behavior of their model to ensure that appropriate tolerances are being used.</p><section id="39d21f03-5e95-4ce2-a5d3-958874584871" data-section-level="3" data-section-text="Dealing with Residuals that are Zero at Boundaries"><h3 id="zero_resid">Dealing with Residuals that are Zero at Boundaries</h3><p>As mentioned in the third case above where relative convergence checks can fail, the converged solutions for some problems are zero on all boundaries with Dirichlet boundary condition (BC) because of the nature of the loading conditions. This would make the <code>ReferenceResidualProblem</code> convergence checks fail because the norm of the reference vector would be zero in this case.  This is manifested when the reference values decrease at the same rate as the residuals, so relative convergence is never achieved.</p><p>In some mechanics problems, such as those with symmetry planes, this might happen only in one direction. This situation can be remedied by grouping together the residuals for all components of the displacement variables rather than checking them individually. If the reference vector for one of the variables in the group is zero (because there are no Dirichlet BCs that restrict the solution in that direction), but it is nonzero for the others, the residual for the set of variables will be checked together, and the variable with a zero value will not prevent convergence as it normally would.  Grouping variables is accomplished by using the <code>group_variables</code> option, which is used to provide one or more lists of names of variables to group together.</p><p>In some cases, however, there may be no degrees of freedom with nonzero residuals at Dirichlet BCs for even a group of variables.  This could happen in mechanics problems that only have free expansion, in which the Dirichlet BCs are important for preventing rigid body motion, but do not restrain the deformation of the body. This could also happen if there is simply no loading on a model during a time step.</p><p>It is necessary in such cases to also specify an absolute tolerance using <code>nl_abs_tol</code>, which is a problem-specific value that must be higher than the residual below which the solution can no longer converge tighter due to numeric roundoff errors, but sufficiently low to ensure that the solution is converged when that limit is reached.</p></section></section><section class="scrollspy" id="160f010d-1b8a-4ec8-bcd5-98b9550ff8af" data-section-level="2" data-section-text="Example Input Syntax"><h2 id="example">Example Input Syntax</h2><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#5c3d4483-89b7-48b6-90c4-58e045113b30">(moose/test/tests/problems/reference_residual_problem/reference_residual.i)</a><p>where the <code>extra_tag_vectors</code> parameter indicates the additional vectors that should be added to the non-linear system. This parameter must contain the name of the vector to be used for the <code>reference_vector</code>. In this example we only create one extra vector, the <code>ref</code> vector, that will be used for holding the reference residuals. To have computing objects add into the reference vector, simply add the <code>extra_vector_tags = &lt;reference_vector_name&gt;</code> param/value pair as illustrated below:</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[BCs]
  [u]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = ${coef}
    variable = u
    extra_vector_tags = &#x27;ref&#x27;
  []
  [v]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = 1
    variable = v
    extra_vector_tags = &#x27;ref&#x27;
  []
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#f5cf1214-8ea0-4fed-9483-fbc41cd1a056">(moose/test/tests/problems/reference_residual_problem/reference_residual.i)</a><p>In this example we are using the integrated fluxes as the reference quantities that we will compare the individual variable residuals to.</p><section id="1690e0bd-50d0-438a-8759-efc1691e7f5c" data-section-level="3" data-section-text="Grouping Variables"><h3 id="grouping-variables">Grouping Variables</h3><pre class="moose-pre" style="max-height:350px;"><code class="language-text">[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  group_variables = &#x27;disp_x disp_y;
                     scalar_strain_zz1 scalar_strain_zz2&#x27;
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#29db281c-7851-4efc-bbc1-f13d9074dd02">(moose/modules/combined/test/tests/reference_residual/group_variables.i)</a><p>Multiple groupings of variables can be provided in <code>group_variables</code> by separating them by  semicolon. Convergence for those variables that are not given in <code>group_variables</code> is checked individually. A given variable can only be included in one group.</p></section></section><section class="scrollspy" id="891e9a9a-469b-438b-a49d-8b813a7ca8ee" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="96ef3e1f-0173-4c85-8a3d-1cbfda06dce7" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">acceptable_iterations</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Iterations after which convergence to acceptable limits is accepted</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Iterations after which convergence to acceptable limits is accepted</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">acceptable_multiplier</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Multiplier applied to relative tolerance for acceptable limit</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Multiplier applied to relative tolerance for acceptable limit</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">Block IDs for the coordinate systems</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;SubdomainName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Block IDs for the coordinate systems</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">converge_on</span><span class="moose-parameter-header-description">If supplied, use only these variables in the individual variable convergence check</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;NonlinearVariableName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>If supplied, use only these variables in the individual variable convergence check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">coord_type</span><span class="moose-parameter-header-default">XYZ</span><span class="moose-parameter-header-description">Type of the coordinate system per block param</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>XYZ</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>XYZ, RZ, RSPHERICAL</p><p class="moose-parameter-description"><span>Description:</span>Type of the coordinate system per block param</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">error_on_jacobian_nonzero_reallocation</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">This causes PETSc to error if it had to reallocate memory in the Jacobian matrix due to not having enough nonzeros</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>This causes PETSc to error if it had to reallocate memory in the Jacobian matrix due to not having enough nonzeros</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_tag_matrices</span><span class="moose-parameter-header-description">Extra matrices to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;TagName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Extra matrices to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_tag_solutions</span><span class="moose-parameter-header-description">Extra solution vectors to add to the system that can be used by objects for coupling variable values stored in them.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;TagName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Extra solution vectors to add to the system that can be used by objects for coupling variable values stored in them.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_tag_vectors</span><span class="moose-parameter-header-description">Extra vectors to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;TagName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Extra vectors to add to the system that can be filled by objects which compute residuals and Jacobians (Kernels, BCs, etc.) by setting tags on them.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">force_restart</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">EXPERIMENTAL: If true, a sub_app may use a restart file instead of using of using the master backup file</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>EXPERIMENTAL: If true, a sub_app may use a restart file instead of using of using the master backup file</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">fv_bcs_integrity_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable checking of overlapping Dirichlet and Flux BCs and/or multiple DirichletBCs per sideset</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable checking of overlapping Dirichlet and Flux BCs and/or multiple DirichletBCs per sideset</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">group_variables</span><span class="moose-parameter-header-description">Name of variables that are grouped together to check convergence. (Multiple groups can be provided, separated by semicolon)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::vector&lt;NonlinearVariableName&gt;&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Name of variables that are grouped together to check convergence. (Multiple groups can be provided, separated by semicolon)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ignore_zeros_in_jacobian</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Do not explicitly store zero values in the Jacobian matrix if true</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Do not explicitly store zero values in the Jacobian matrix if true</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">kernel_coverage_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable kernel->subdomain coverage check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable kernel->subdomain coverage check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">material_coverage_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable material->subdomain coverage check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable material->subdomain coverage check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">material_dependency_check</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set to false to disable material dependency check</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to false to disable material dependency check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">near_null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the near nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the near nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">parallel_barrier_messaging</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Displays messaging from parallel barrier notifications when executing or transferring to/from Multiapps (default: false)</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Displays messaging from parallel barrier notifications when executing or transferring to/from Multiapps (default: false)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">previous_nl_solution_required</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">True to indicate that this calculation requires a solution vector for storing the prvious nonlinear iteration.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>True to indicate that this calculation requires a solution vector for storing the prvious nonlinear iteration.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">reference_residual_variables</span><span class="moose-parameter-header-description">Set of variables that provide reference residuals for relative convergence check</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;AuxVariableName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set of variables that provide reference residuals for relative convergence check</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">reference_vector</span><span class="moose-parameter-header-description">The tag name of the reference residual vector.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>TagName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The tag name of the reference residual vector.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">restart_file_base</span><span class="moose-parameter-header-description">File base name used for restart (e.g. <path>/<filebase> or <path>/LATEST to grab the latest file available)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileNameNoExtension</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>File base name used for restart (e.g. <path>/<filebase> or <path>/LATEST to grab the latest file available)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">rz_coord_axis</span><span class="moose-parameter-header-default">Y</span><span class="moose-parameter-header-description">The rotation axis (X | Y) for axisymetric coordinates</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>Y</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>X, Y</p><p class="moose-parameter-description"><span>Description:</span>The rotation axis (X | Y) for axisymetric coordinates</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">skip_additional_restart_data</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">True to skip additional data in equation system for restart. It is useful for starting a transient calculation with a steady-state solution</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>True to skip additional data in equation system for restart. It is useful for starting a transient calculation with a steady-state solution</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">skip_nl_system_check</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">True to skip the NonlinearSystem check for work to do (e.g. Make sure that there are variables to solve for).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>True to skip the NonlinearSystem check for work to do (e.g. Make sure that there are variables to solve for).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">solution_variables</span><span class="moose-parameter-header-description">Set of solution variables to be checked for relative convergence</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;NonlinearVariableName&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set of solution variables to be checked for relative convergence</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">solve</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not to actually solve the Nonlinear system.  This is handy in the case that all you want to do is execute AuxKernels, Transfers, etc. without actually solving anything</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to actually solve the Nonlinear system.  This is handy in the case that all you want to do is execute AuxKernels, Transfers, etc. without actually solving anything</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">transpose_null_space_dimension</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The dimension of the transpose nullspace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The dimension of the transpose nullspace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_nonlinear</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines whether to use a Nonlinear vs a Eigenvalue system (Automatically determined based on executioner)</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether to use a Nonlinear vs a Eigenvalue system (Automatically determined based on executioner)</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="82517481-3209-4678-b72b-136b8ee67638" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">default_ghosting</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not to use libMesh's default amount of algebraic and geometric ghosting</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to use libMesh's default amount of algebraic and geometric ghosting</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section></section><div class="moose-modal modal" id="5c3d4483-89b7-48b6-90c4-58e045113b30"><div class="modal-content"><h4>(moose/test/tests/problems/reference_residual_problem/reference_residual.i)</h4><pre class="moose-pre"><code class="language-text">coef=1

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [u][]
  [v][]
[]

[Kernels]
  [u_diff]
    type = CoefDiffusion
    variable = u
    coef = ${coef}
  []
  [u_rxn]
    type = PReaction
    variable = u
    coefficient = ${coef}
    power = 2
  []
  [u_f]
    type = BodyForce
    variable = u
    value = ${coef}
  []
  [v_diff]
    type = Diffusion
    variable = v
  []
  [v_rxn]
    type = PReaction
    variable = v
    coefficient = 1
    power = 2
  []
  [v_f]
    type = BodyForce
    variable = v
    value = 1
  []
[]

[BCs]
  [u]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = ${coef}
    variable = u
    extra_vector_tags = &#x27;ref&#x27;
  []
  [v]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = 1
    variable = v
    extra_vector_tags = &#x27;ref&#x27;
  []
[]


[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="f5cf1214-8ea0-4fed-9483-fbc41cd1a056"><div class="modal-content"><h4>(moose/test/tests/problems/reference_residual_problem/reference_residual.i)</h4><pre class="moose-pre"><code class="language-text">coef=1

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [u][]
  [v][]
[]

[Kernels]
  [u_diff]
    type = CoefDiffusion
    variable = u
    coef = ${coef}
  []
  [u_rxn]
    type = PReaction
    variable = u
    coefficient = ${coef}
    power = 2
  []
  [u_f]
    type = BodyForce
    variable = u
    value = ${coef}
  []
  [v_diff]
    type = Diffusion
    variable = v
  []
  [v_rxn]
    type = PReaction
    variable = v
    coefficient = 1
    power = 2
  []
  [v_f]
    type = BodyForce
    variable = v
    value = 1
  []
[]

[BCs]
  [u]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = ${coef}
    variable = u
    extra_vector_tags = &#x27;ref&#x27;
  []
  [v]
    type = RobinBC
    boundary = &#x27;left right&#x27;
    coef = 1
    variable = v
    extra_vector_tags = &#x27;ref&#x27;
  []
[]


[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="29db281c-7851-4efc-bbc1-f13d9074dd02"><div class="modal-content"><h4>(moose/modules/combined/test/tests/reference_residual/group_variables.i)</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  file = 2squares.e
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  group_variables = &#x27;disp_x disp_y;
                     scalar_strain_zz1 scalar_strain_zz2&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]

  [./scalar_strain_zz1]
    order = FIRST
    family = SCALAR
  [../]
  [./scalar_strain_zz2]
    order = FIRST
    family = SCALAR
  [../]
[]

[AuxVariables]
  [./temp]
    order = FIRST
    family = LAGRANGE
  [../]
  [./saved_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./saved_y]
    order = FIRST
    family = LAGRANGE
  [../]

  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]

  [./strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./aux_strain_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_scalar_strain_zz1]
    order = FIRST
    family = SCALAR
  [../]
  [./saved_scalar_strain_zz2]
    order = FIRST
    family = SCALAR
  [../]
[]

[Postprocessors]
  [./react_z1]
    type = MaterialTensorIntegral
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    block = 1
  [../]
  [./react_z2]
    type = MaterialTensorIntegral
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    block = 2
  [../]
[]

[Modules]
  [./TensorMechanics]
    [./GeneralizedPlaneStrain]
      [./gps1]
        use_displaced_mesh = true
        displacements = &#x27;disp_x disp_y&#x27;
        scalar_out_of_plane_strain = scalar_strain_zz1
        block = &#x27;1&#x27;
      [../]
      [./gps2]
        use_displaced_mesh = true
        displacements = &#x27;disp_x disp_y&#x27;
        scalar_out_of_plane_strain = scalar_strain_zz2
        block = &#x27;2&#x27;
      [../]
    [../]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = false
    displacements = &#x27;disp_x disp_y&#x27;
    temperature = temp
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    block = &#x27;1 2&#x27;
  [../]
[]

[AuxKernels]
  [./tempfuncaux]
    type = FunctionAux
    variable = temp
    function = tempfunc
    use_displaced_mesh = false
  [../]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]

  [./strain_xx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = strain_xx
    index_i = 0
    index_j = 0
  [../]
  [./strain_xy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = strain_xy
    index_i = 0
    index_j = 1
  [../]
  [./strain_yy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = strain_yy
    index_i = 1
    index_j = 1
  [../]
  [./aux_strain_zz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = aux_strain_zz
    index_i = 2
    index_j = 2
  [../]
[]

[AuxScalarKernels]
  [./saved_scalar_strain_zz1_ref_resid]
    type = GeneralizedPlaneStrainReferenceResidual
    variable = saved_scalar_strain_zz1
    generalized_plane_strain = gps1_GeneralizedPlaneStrainUserObject
  [../]
  [./saved_scalar_strain_zz2_ref_resid]
    type = GeneralizedPlaneStrainReferenceResidual
    variable = saved_scalar_strain_zz2
    generalized_plane_strain = gps2_GeneralizedPlaneStrainUserObject
  [../]
[]

[Functions]
  [./tempfunc]
    type = ParsedFunction
    value = &#x27;(1-x)*t&#x27;
  [../]
[]

[BCs]
  [./bottom1x]
    type = DirichletBC
    boundary = 1
    variable = disp_x
    value = 0.0
  [../]
  [./bottom1y]
    type = DirichletBC
    boundary = 1
    variable = disp_y
    value = 0.0
  [../]
  [./bottom2x]
    type = DirichletBC
    boundary = 2
    variable = disp_x
    value = 0.0
  [../]
  [./bottom2y]
    type = DirichletBC
    boundary = 2
    variable = disp_y
    value = 0.0
  [../]
[]

[Materials]
  [./elastic_tensor]
    type = ComputeIsotropicElasticityTensor
    poissons_ratio = 0.3
    youngs_modulus = 1e6
    block = &#x27;1 2&#x27;
  [../]
  [./strain1]
    type = ComputePlaneSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
    scalar_out_of_plane_strain = scalar_strain_zz1
    block = 1
    eigenstrain_names = eigenstrain
  [../]
  [./strain2]
    type = ComputePlaneSmallStrain
    displacements = &#x27;disp_x disp_y&#x27;
    scalar_out_of_plane_strain = scalar_strain_zz2
    block = 2
    eigenstrain_names = eigenstrain
  [../]
  [./thermal_strain]
    type = ComputeThermalExpansionEigenstrain
    temperature = temp
    thermal_expansion_coeff = 0.02
    stress_free_temperature = 0.5
    block = &#x27;1 2&#x27;
    eigenstrain_name = eigenstrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;1 2&#x27;
  [../]
[]

[Executioner]
  type = Transient

  solve_type = PJFNK
  line_search = none

# controls for linear iterations
  l_max_its = 100
  l_tol = 1e-10

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-10

# time control
  start_time = 0.0
  dt = 1.0
  dtmin = 1.0
  end_time = 2.0
  num_steps = 5000
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#d8d246ee-ed8b-4f25-a7a7-db5d105395d4" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#160f010d-1b8a-4ec8-bcd5-98b9550ff8af" class="tooltipped" data-position="left" data-tooltip="Example Input Syntax">Example Input Syntax</a></li><li><a href="#891e9a9a-469b-438b-a49d-8b813a7ca8ee" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>